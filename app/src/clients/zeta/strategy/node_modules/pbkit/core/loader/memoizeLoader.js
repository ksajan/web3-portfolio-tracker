"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function memoizeLoader(l) {
    const memo = {};
    return {
        async load(path) {
            if (memo[path])
                return memo[path];
            return memo[path] = await l.load(path);
        },
        update(loadResult) {
            for (const path in memo) {
                const item = memo[path];
                if (!item || item.absolutePath !== loadResult.absolutePath)
                    continue;
                item.data = loadResult.data;
            }
        },
    };
}
exports.default = memoizeLoader;
